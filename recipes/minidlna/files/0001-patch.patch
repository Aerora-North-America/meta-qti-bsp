From ea06447e0bc6459f476f3ed471b8a273c622fc8b Mon Sep 17 00:00:00 2001
From: Tyler Wear <twear@codeaurora.org>
Date: Tue, 12 Mar 2013 12:20:35 -0700
Subject: [PATCH 1/1] patch

---
 linux/minidlna.init.d.script |   16 +++++++---------
 1 files changed, 7 insertions(+), 9 deletions(-)
 mode change 100644 => 100755 linux/minidlna.init.d.script

diff --git a/linux/minidlna.init.d.script b/linux/minidlna.init.d.script
old mode 100644
new mode 100755
index 491eb61..4824195
--- a/linux/minidlna.init.d.script
+++ b/linux/minidlna.init.d.script
@@ -21,26 +21,24 @@
 MINIDLNA=/usr/sbin/minidlna
 PIDFILE=/var/run/minidlna.pid
 CONF=/etc/minidlna.conf
-ARGS="-f $CONF"
+ARGS="-f $CONF -i wlan0 -R"
+WLANARGS="-f $CONF -R"

 test -f $MINIDLNA || exit 0

-. /lib/lsb/init-functions
-
 case "$1" in
-start)  log_daemon_msg "Starting minidlna" "minidlna"
+start)
         start-stop-daemon --start --quiet --pidfile $PIDFILE --startas $MINIDLNA -- $ARGS $LSBNAMES
-        log_end_msg $?
         ;;
-stop)   log_daemon_msg "Stopping minidlna" "minidlna"
+startWLAN)
+        start-stop-daemon --start --quiet --pidfile $PIDFILE --startas $MINIDLNA -- $WLANARGS $LSBNAMES
+        ;;
+stop)
         start-stop-daemon --stop --quiet --pidfile $PIDFILE
-        log_end_msg $?
         ;;
 restart|reload|force-reload)
-        log_daemon_msg "Restarting minidlna" "minidlna"
         start-stop-daemon --stop --retry 5 --quiet --pidfile $PIDFILE
         start-stop-daemon --start --quiet --pidfile $PIDFILE --startas $MINIDLNA -- $ARGS $LSBNAMES
-        log_end_msg $?
         ;;
 status)
         status_of_proc -p $PIDFILE $MINIDLNA minidlna && exit 0 || exit $?
-- 
1.7.8.3

