#@TYPE: Machine
#@NAME: qcs610-odk
#@DESCRIPTION: Machine configuration for qcs610-odk

require conf/machine/include/qcs610.inc

KERNEL_IMAGETYPE   = "Image.gz"
KERNEL_DTB_NAMES   = "qcom/qcs610-iot.dtb qcom/qcs410-iot.dtb"
KERNEL_BASE        = "0x80000000"
KERNEL_TAGS_OFFSET = "0x81e00000"

KERNEL_CONFIG ?= "vendor/sdmsteppe-perf_defconfig"
KERNEL_CONFIG_qti-distro-debug ?= "vendor/sdmsteppe_defconfig"

CONSOLE_PARAM ?= ""
CONSOLE_PARAM_qti-distro-debug ?= "console=ttyMSM0,115200,n8"

KERNEL_CMD_PARAMS ?= "noinitrd rootwait ${CONSOLE_PARAM} no_console_suspend=1 androidboot.hardware=qcom androidboot.console=ttyMSM0 lpm_levels.sleep_disabled=1 service_locator.enable=1 firmware_class.path=/lib/firmware/updates msm_rtb.filter=0x237"

SERIAL_CONSOLE    ?= ""
SERIAL_CONSOLE_qti-distro-debug ?= "115200 ttyMSM0"

# bootloader configuration
EXTRA_IMAGEDEPENDS += "lib64-edk2"

# Conf with partition entries required for machine.
MACHINE_PARTITION_CONF = "qcs610-odk-partition.conf"

# filesystem configurations to be applied on image.
MACHINE_FSCONFIG_CONF = "qcs610-fsconfig.conf"

# Multilib configuration
DEFAULTTUNE = "armv7ahf-neon"
TARGET_KERNEL_ARCH = "aarch64"
require conf/multilib.conf
MULTILIBS = "multilib:lib64"
DEFAULTTUNE_virtclass-multilib-lib64 = "aarch64"
TARGET_VENDOR_virtclass-multilib-lib64="-oe"

## Machine features ##
# drm:                   Machine supports DRM display drivers
# qti-emac-dwc-eqos:     Machine supports emac-dwc-eqos driver
# qti-audio:             Machine supports QTI audio solution
# qti-audio-cal:         Machine supports QTI audio calibration solution
# qti-audio-encoder:     Machine supports QTI audio encoder solution
# qti-cdsp:              Machine supports QTI cdsp solution
# qti-adsp:              Machine supports QTI adsp solution
# qti-ab-boot:           Machine supports a/b boot solution
# qti-helium:            Machine supports QTI helium WiFi target
# qti-sensors:           Machine supports sensors qti solution
# tflite-hw-delegate:    Machine supports TFlite hardware delegates
# qti-tflite-delegate:   Machine supports Tensorflow lite hardware delegates
# qti-wifi:              Machine supports wifi solution
# opencl:                Machine supports OpenCL driver

MACHINE_FEATURES_append = " drm qti-emac-dwc-eqos qti-audio qti-audio-cal qti-audio-encoder qti-cdsp qti-adsp qti-ab-boot qti-helium qti-sensors tflite-hw-delegate qti-wifi qti-tflite-delegate opencl qti-security"
