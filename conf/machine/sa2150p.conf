#@TYPE: Machine
#@NAME: SA2150P
#@DESCRIPTION: Machine configuration for QTI SA2150P

require conf/distro/include/debug_flags.inc
require conf/machine/include/qcs40x.inc

DEFAULTTUNE = "aarch64"

MACHINE_MNT_POINTS = "/firmware /persist /cache /dsp"

# Sizes for EXT4 (in bytes)
SYSTEM_SIZE_EXT4 ?= "681574400"
SYSTEMRW_SIZE_EXT4 ?= "8388608"
USERDATA_SIZE_EXT4 ?= "2000000000"
CACHE_SIZE_EXT4 ?= "80000000"

# Formats of root filesystem images.
IMAGE_FSTYPES += "ext4"
RECOVERY_IMAGE = "0"

KERNEL_IMAGETYPE = "Image.gz-dtb"
IMAGE_EXT4_EXTRA_OPTIONS = "${@bb.utils.contains('DISTRO_FEATURES','ro-rootfs',' -J -b 4096 ','',d)}"

DISTRO_FEATURES += "persist-image"
DISTRO_FEATURES += "ab-boot-support"
DISTRO_FEATURES_NATIVE += "ab-boot-support"

PREFERRED_PROVIDER_virtual/libgles1 = "adreno"
PREFERRED_PROVIDER_virtual/libgles2 = "adreno"
PREFERRED_PROVIDER_virtual/egl = "adreno"

# Flag to Enable QPermissions
QPERMISSIONS_ENABLE = "1"

QPERM_FILE_pn-start-script-ab-slot-util = "${bindir}/getslotsuffix:root:system"
QPERM_FILE_pn-system-core = "${sysconfdir}/build.prop:leprop:leprop"
QPERM_FILE_pn-system-prop = "/build.prop:leprop:leprop"

BBMASK += "meta-qti-adk/"
BBMASK += "meta-qti-audio/"
BBMASK += "meta-qti-audio-cal/"
BBMASK += "meta-qti-audio-external/"
BBMASK += "meta-qti-bt/"
BBMASK += "meta-qti-display/"
BBMASK += "meta-qti-eap/"
BBMASK += "meta-qti-gst/"
BBMASK += "meta-qti-qsap/"
BBMASK += "meta-qti-qzhost/"
BBMASK += "meta-qti-video/"
BBMASK += "meta-qti-wlan/"
