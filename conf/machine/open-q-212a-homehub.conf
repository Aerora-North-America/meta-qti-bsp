#@TYPE: Machine
#@NAME: open-q-212a-homehub dev kit
#@DESCRIPTION: Machine configuration for open-q-212a-homehub dev kit based on APQ8009

require conf/machine/include/apq8009.inc

KERNEL_IMAGETYPE   = "zImage"
KERNEL_DTB_NAMES    = "qcom/apq8009-robot-som-refboard.dtb"
KERNEL_BASE        = "0x81C00000"
KERNEL_TAGS_OFFSET = "0x81900000"

KERNEL_CONFIG     ?= "msm8909-minimal-perf_defconfig"
KERNEL_CONFIG_qti-distro-debug ?= "msm8909-minimal_defconfig"

CONSOLE_PARAM     ?= ""
CONSOLE_PARAM_qti-distro-debug ?= "console=ttyMSM0,115200,n8"

KERNEL_CMD_PARAMS  = "noinitrd ${CONSOLE_PARAM} androidboot.hardware=qcom ehci-hcd.park=3 msm_rtb.filter=0x37 lpm_levels.sleep_disabled=1 rootwait androidboot.bootdevice=7824900.sdhci firmware_class.path=/lib/firmware/updates rw"

SERIAL_CONSOLE    ?= ""
SERIAL_CONSOLE_qti-distro-debug ?= "115200 ttyMSM0"

PREFERRED_VERSION_linux-msm           = "4.9"
PREFERRED_PROVIDER_virtual/bootloader = "lk"

# Conf with partition entries required for machine.
MACHINE_PARTITION_CONF = "${COREBASE}/meta-qti-bsp/conf/machine/partition/${MACHINE}-partition.conf"

# filesystem configurations to be applied on image.
MACHINE_FSCONFIG_CONF = "apq8009-fsconfig.conf"

## MACHINE_FEATURES ##

# WLAN soc is naples.
MACHINE_FEATURES_append = " fbdev mm-camera naples qti-bluetooth qti-camera qti-display qti-video qti-wifi"

MACHINE_FEATURES_BACKFILL_CONSIDERED += "qemu-usermode"
